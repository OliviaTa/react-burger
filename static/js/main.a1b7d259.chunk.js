(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{109:function(e,t,n){e.exports={orderList:"orders_orderList__2ASvn"}},111:function(e,t,n){e.exports={wrapper:"burger-constructor_wrapper__3y1z5"}},112:function(e,t,n){e.exports={modalOverlay:"modal-overlay_modalOverlay__tfXD-"}},113:function(e,t,n){e.exports={wrapper:"burger-ingredients_wrapper__4IsT5"}},114:function(e,t,n){e.exports={ingredients:"ingredients-section_ingredients__3Ff4p"}},115:function(e,t,n){e.exports={ingredients:"ingredients_ingredients__BIdYV"}},116:function(e,t,n){e.exports={tabs:"tabs_tabs__1oUdo"}},117:function(e,t,n){e.exports={value:"ingredient-details-value_value__3Frcj"}},118:function(e,t,n){e.exports={orders:"orders_orders__3xbma"}},120:function(e,t,n){e.exports={navList:"nav-list_navList__1L87A"}},121:function(e,t,n){e.exports={app:"app_app__M9MMq"}},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return _n}));var r=n(1),c=n.n(r),a=n(38),s=n.n(a),i=n(49),o=n(14),u=n(7),d=i.c,l=function(){return Object(i.b)()},j=n(30),b=n.n(j),p=n(0),m=function(){var e=d((function(e){var t;return(null===(t=e.allOrders)||void 0===t?void 0:t.ordersData)||{orders:[],total:0,totalToday:0}})),t=e.orders,n=e.total,r=e.totalToday,c=t?t.filter((function(e){return"done"===e.status})).map((function(e){return e.number})):[],a=t?t.filter((function(e){return"pending"===e.status})).map((function(e){return e.number})):[];return Object(p.jsxs)("section",{className:b.a.ordersStats,children:[Object(p.jsxs)("div",{className:"".concat(b.a.ordersBoard," mb-15"),children:[Object(p.jsxs)("div",{className:b.a.done,children:[Object(p.jsx)("h2",{className:"text text_type_main-medium mb-6",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(p.jsx)("ul",{className:"".concat(b.a.ready," ").concat(b.a.ordersList),children:c.map((function(e){return Object(p.jsx)("li",{className:"text text_type_digits-default",children:e},e)}))})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{className:"text text_type_main-medium mb-6",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(p.jsx)("ul",{className:b.a.ordersList,children:a.map((function(e){return Object(p.jsx)("li",{className:"text text_type_digits-default",children:e},e)}))})]})]}),Object(p.jsxs)("div",{className:"mb-15",children:[Object(p.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(p.jsx)("div",{className:"".concat(b.a.completedNumber," text text_type_digits-large"),children:n})]}),Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{className:"text text_type_main-medium",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(p.jsx)("div",{className:"".concat(b.a.completedNumber," text text_type_digits-large"),children:r})]})]})},O=n(2),f=n(215),h=n(223),x=n(219),_=n(218),g=n(124),v=function(e){var t=new Date(e),n=Object(f.a)(t)?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f":Object(h.a)(t)?"\u0412\u0447\u0435\u0440\u0430":"".concat(Object(x.a)(t,new Date,{locale:g.a})," \u043d\u0430\u0437\u0430\u0434");return"".concat(n,", ").concat(Object(_.a)(t,"HH:mm")," i-").concat(Object(_.a)(t,"z"))},N=function(e){return e.filter((function(e){return e})).reduce((function(e,t){return"bun"===t.type?e+2*t.price:e+t.price}),0)},y=function(e,t){return e.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{ingredients:e.ingredients.map((function(e){return t.filter((function(t){return t._id===e}))[0]}))})}))},C=n(33),S=n(6),w=n(27),E=n.n(w),I=n(50),T=n.n(I),k=function(e){switch(e.status){case"done":return Object(p.jsx)("div",{className:"".concat(T.a.done," mt-2"),children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d"});case"pending":return Object(p.jsx)("div",{className:"".concat(T.a.pending," mt-2"),children:"\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"});case"created":return Object(p.jsx)("div",{className:"".concat(T.a.created," mt-2"),children:"\u0421\u043e\u0437\u0434\u0430\u043d"});case"canceled":return Object(p.jsx)("div",{className:"".concat(T.a.canceled," mt-2"),children:"\u041e\u0442\u043c\u0435\u043d\u0435\u043d"});default:return null}},R=function(e){var t=e.order,n=e.showStatus,c=Object(u.h)(),a=Object(u.g)(),s=Object(r.useMemo)((function(){return v(t.createdAt)}),[t]),i=[],o=null;if(t.ingredients.length>5){for(var d=0;d<5;d++)i.push(t.ingredients[d]);o=Object(O.a)(Object(O.a)({},t.ingredients[5]),{},{count:t.ingredients.length-5})}else i=Object(C.a)(t.ingredients);return Object(p.jsxs)("div",{className:"".concat(E.a.card," p-6"),onClick:function(){a.push("".concat(c.pathname,"/").concat(t._id),{background:c,orderNumber:t.number})},children:[Object(p.jsxs)("div",{className:"".concat(E.a.header," mb-6"),children:[Object(p.jsx)("div",{className:"text text_type_digits-default",children:"#".concat(t.number)}),Object(p.jsx)("div",{className:E.a.timestamp,children:s})]}),Object(p.jsx)("div",{className:"text text_type_main-medium",children:t.name}),n&&Object(p.jsx)(k,{status:t.status}),Object(p.jsxs)("div",{className:"".concat(E.a.content," mt-6"),children:[Object(p.jsxs)("div",{className:E.a.images,children:[o&&Object(p.jsxs)("div",{className:E.a.addIngredient,children:[Object(p.jsx)("img",{className:E.a.image,src:o.image,alt:"ingredient"}),Object(p.jsx)("div",{className:E.a.ingredientsCount,children:"+".concat(o.count)})]}),i.reverse().map((function(e,t){return"object"===typeof e?Object(p.jsx)("img",{className:E.a.image,src:e.image,alt:"ingredient"},t):null}))]}),Object(p.jsxs)("div",{className:E.a.price,children:[Object(p.jsx)("div",{className:"text text_type_digits-default mr-2",children:N(t.ingredients)}),Object(p.jsx)(S.CurrencyIcon,{type:"primary"})]})]})]})},D=n(109),L=n.n(D),B=function(e){var t=e.orders,n=e.showStatus,c=void 0!==n&&n,a=d((function(e){return e.burgerConstructor.ingredients})),s=Object(r.useMemo)((function(){return y(t,a)}),[t,a]);return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:L.a.orderList,children:s.map((function(e){return e?Object(p.jsx)(R,{order:e,showStatus:c},e._id):null}))})})},U=n(8),P=n.n(U),A=function(){var e=d((function(e){var t;return(null===(t=e.allOrders.ordersData)||void 0===t?void 0:t.orders)||[]}));return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{className:"".concat(P.a.container," text text_type_main-large mb-5 mt-10"),children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(p.jsxs)("main",{className:P.a.main,children:[Object(p.jsx)("section",{className:P.a.orders,children:Object(p.jsx)(B,{orders:e})}),Object(p.jsx)(m,{})]})]})},G=n(17),M=n(9),z=n(12),F=n.n(z),q=n(26);function H(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}function V(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.expires;if("number"==typeof r&&r){var c=new Date;c.setTime(c.getTime()+1e3*r),r=n.expires=c}r instanceof Date&&r.toUTCString&&(n.expires=r.toUTCString());var a=e+"="+(t=encodeURIComponent(t));for(var s in n){a+="; "+s;var i=n[s];!0!==Boolean(i)&&(a+="="+i)}document.cookie=a}var W="https://norma.nomoreparties.space/api/auth/user",J=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))},X=function(){var e=Object(q.a)(F.a.mark((function e(t,n){var r;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,n);case 3:return r=e.sent,e.next=6,J(r);case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(){return fetch("https://norma.nomoreparties.space/api/auth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then(J)},Y=function(){var e=Object(q.a)(F.a.mark((function e(t){var n,r,c,a,s,i=arguments;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=i.length>1&&void 0!==i[1]?i[1]:{}).headers||(n.headers={}),e.prev=2,e.next=5,fetch(t,n);case 5:return r=e.sent,e.next=8,J(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),"jwt expired"!==e.t0.message){e.next=30;break}return e.next=16,Z();case 16:return c=e.sent,localStorage.setItem("refreshToken",c.refreshToken),V("accessToken",c.accessToken.split("Bearer ")[1],{expires:1200}),(a=new Headers(n.headers)).append("athorization",c.accessToken),n.headers=a,e.next=24,fetch(t,n);case 24:return s=e.sent,e.next=27,J(s);case 27:return e.abrupt("return",e.sent);case 30:return e.abrupt("return",Promise.reject(e.t0));case 31:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(q.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X("https://norma.nomoreparties.space/api/ingredients");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(){var e=Object(q.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y("https://norma.nomoreparties.space/api/orders",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+H("accessToken")},body:JSON.stringify({ingredients:t})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(q.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X("https://norma.nomoreparties.space/api/password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(q.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X("https://norma.nomoreparties.space/api/password-reset/reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(q.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X("https://norma.nomoreparties.space/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(q.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X("https://norma.nomoreparties.space/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(q.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X("https://norma.nomoreparties.space/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(q.a)(F.a.mark((function e(){var t;return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=H("accessToken")){e.next=3;break}return e.abrupt("return",{user:null});case 3:return e.next=5,Y(W,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(q.a)(F.a.mark((function e(t){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(W,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+H("accessToken")},body:JSON.stringify(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se="SET_USER",ie="CLEAR_USER",oe="SET_SIGNIN_SUCCESS",ue=function(){return function(e){re().then((function(t){e({type:ie}),V("accessToken","",{expires:-1})}))}},de=function(){return function(e){ce().then((function(t){e({type:se,user:t.user})}))}},le=function(){var e=l(),t=Object(u.g)(),n=Object(r.useState)({email:""}),c=Object(M.a)(n,2),a=c[0],s=c[1],i=d((function(e){return e.auth.user}));Object(r.useEffect)((function(){e(de())}),[e]);var j=Object(r.useCallback)((function(e){e.preventDefault(),$(a).then((function(e){e.success&&t.replace({pathname:"/reset-password",state:{from:"/forgot-password"}})}))}),[a,t]);return i?Object(p.jsx)(u.a,{to:"/"}):Object(p.jsxs)("div",{className:P.a.wrapper,children:[Object(p.jsxs)("form",{onSubmit:j,className:"".concat(P.a.form," mb-20"),children:[Object(p.jsx)("h1",{className:P.a.heading,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(p.jsx)(S.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",value:a.email,name:"email",size:"default",onChange:function(e){s(Object(O.a)(Object(O.a)({},a),{},Object(G.a)({},e.target.name,e.target.value)))}}),Object(p.jsx)(S.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]}),Object(p.jsx)("div",{className:P.a.actions,children:Object(p.jsxs)("p",{children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(p.jsx)(o.b,{className:P.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})},je=n(217),be=n(123),pe=n(221),me="GET_INGREDIENTS_REQUEST",Oe="GET_INGREDIENTS_SUCCESS",fe="GET_INGREDIENTS_FAILED",he="ADD_CONSTRUCTOR_INGREDIENT",xe="REMOVE_CONSTRUCTOR_INGREDIENT",_e="CLEAR_CONSTRUCTOR",ge="CHANGE_CONSTRUCTOR_INGREDIENT_POSITION",ve=n(220),Ne=function(e){var t=e.item,n=e.index,r=l(),c=Object(ve.a)({type:"newPosition",item:{item:t,originalIndex:n},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,t){t.didDrop()||r({type:ge,item:e.item,index:e.originalIndex})}}),a=Object(M.a)(c,2),s=a[0].isDragging,i=a[1],o=Object(pe.a)({accept:"newPosition",canDrop:function(){return!1},hover:function(e){var c=e.item;c.uid!==t.uid&&r({type:ge,item:c,index:n})}}),u=Object(M.a)(o,2)[1],d=s?0:1;return Object(p.jsxs)("div",{ref:function(e){return i(u(e))},className:"burger_component mb-4",style:{opacity:d},children:[Object(p.jsx)("div",{className:"drag_icon",children:Object(p.jsx)(S.DragIcon,{type:"primary"})}),Object(p.jsx)(S.ConstructorElement,{text:t.name,thumbnail:t.image,price:t.price,handleClose:function(){r({type:xe,index:n})}})]})},ye=(n(207),function(){var e=d((function(e){return e.burgerConstructor.constructorIngredients})),t=e.bun,n=e.ingredients,r=Object(pe.a)({accept:"newPosition"}),c=Object(M.a)(r,2)[1];return Object(p.jsxs)("div",{className:"ingredients mb-10",children:[t&&Object(p.jsx)("div",{className:"mb-4",children:Object(p.jsx)(S.ConstructorElement,{type:"top",isLocked:!0,text:"".concat(t.name," (\u0432\u0435\u0440\u0445)"),thumbnail:t.image,price:t.price})}),Object(p.jsx)("div",{ref:c,className:"scrolled-elements",children:n.map((function(e,t){return Object(p.jsx)(Ne,{item:e,index:t},e.uid)}))}),t&&Object(p.jsx)("div",{className:"bottom-bun pt-4",children:Object(p.jsx)(S.ConstructorElement,{type:"bottom",isLocked:!0,text:"".concat(t.name," (\u043d\u0438\u0437)"),thumbnail:t.image,price:t.price})})]})}),Ce=n(111),Se=n.n(Ce),we=n.p+"static/media/loading.acec6d67.svg",Ee="GET_ORDER_REQUEST",Ie="GET_ORDER_SUCCESS",Te=n(112),ke=n.n(Te),Re=function(e){var t=e.onClick,n=e.children;return Object(p.jsx)("div",{className:ke.a.modalOverlay,onClick:function(e){e.target===e.currentTarget&&t()},children:n})},De=n(84),Le=n.n(De),Be=function(e){var t=e.header,n=void 0===t?null:t,r=e.headerClassName,a=void 0===r?null:r,i=e.onClose,o=e.children;return c.a.useEffect((function(){var e=function(e){"Escape"===e.key&&i()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[i]),s.a.createPortal(Object(p.jsx)(Re,{onClick:i,children:Object(p.jsxs)("div",{className:"".concat(Le.a.modal," pt-10 pb-15 text"),children:[Object(p.jsxs)("header",{className:"".concat(Le.a.header," mr-10 ml-10"),children:[Object(p.jsx)("h1",{className:"".concat(a||""," text text_type_main-large"),children:n}),Object(p.jsx)(S.CloseIcon,{type:"primary",onClick:i})]}),o]})}),document.getElementById("modal"))},Ue=n.p+"static/media/graphics.5bf6b48a.png",Pe=n(63),Ae=n.n(Pe),Ge=function(e){var t=e.orderNumber;return Object(p.jsxs)("div",{className:"".concat(Ae.a.orderDetails," pt-4 pb-15 text text_type_main-default"),children:[Object(p.jsx)("div",{className:"".concat(Ae.a.orderNumber," mb-8 text text_type_digits-large"),children:t}),Object(p.jsx)("div",{className:"mb-15 text text_type_main-medium",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(p.jsx)("img",{className:"mb-15",src:Ue,alt:"Check mark icon",width:"107",height:"102"}),Object(p.jsx)("div",{className:"mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(p.jsx)("div",{className:Ae.a.textColor,children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},Me=n(64),ze=n.n(Me),Fe=function(){var e=l(),t=Object(u.g)(),n=d((function(e){return e.burgerConstructor.constructorIngredients})),c=n.bun,a=n.ingredients,s=d((function(e){return e.order})),i=s.order,o=s.orderRequestSuccess,j=s.orderRequest,b=Object(r.useState)(!1),m=Object(M.a)(b,2),O=m[0],f=m[1],h=d((function(e){return e.auth.user})),x=Object(r.useMemo)((function(){return a.reduce((function(e,t){return e+t.price}),0)+(c?2*c.price:0)}),[c,a]),_=Object(r.useMemo)((function(){var e=a.map((function(e){return e._id}));return c&&e.push(c._id),e}),[c,a]),g=Object(r.useMemo)((function(){return i?null===i||void 0===i?void 0:i.number:0}),[i]);Object(r.useEffect)((function(){e(de())}),[e]);return Object(p.jsxs)("div",{className:"".concat(ze.a.info," ").concat(j?ze.a.disabledButton:""),id:"info",children:[Object(p.jsxs)("div",{className:"".concat(ze.a.price," mr-10"),children:[Object(p.jsx)("span",{className:"text_type_digits-medium mr-2",children:x}),Object(p.jsx)(S.CurrencyIcon,{type:"primary"})]}),Object(p.jsx)(S.Button,{type:"primary",size:"large",onClick:function(){if(h){if(!_.length)return;e((n=_,function(e){e({type:Ee}),K(n).then((function(t){var n=t.order;(null===n||void 0===n?void 0:n.ingredients)&&(n.ingredients=n.ingredients.filter((function(e){return e}))),e({type:Ie,order:n}),e({type:_e})})).catch((function(e){return console.log(e)}))})),f(!0)}else t.push({pathname:"/login",state:{from:"/"}});var n},children:j?Object(p.jsx)("img",{className:"ml-10 mr-10",src:we,alt:"loading",width:"18",height:"18"}):"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"}),O&&o&&Object(p.jsx)(Be,{onClose:function(){return f(!1)},children:Object(p.jsx)(Ge,{orderNumber:g})})]})},qe=function(){var e=l(),t=Object(pe.a)({accept:"ingredients",drop:function(t){e({type:he,item:t})}}),n=Object(M.a)(t,2)[1];return Object(p.jsxs)("section",{ref:n,className:"".concat(Se.a.wrapper," pt-25 pl-4"),children:[Object(p.jsx)(ye,{}),Object(p.jsx)(Fe,{})]})},He=n(113),Ve=n.n(He),We=n(51),Je=n.n(We),Xe=function(e){var t=e.item,n=Object(u.g)(),r=Object(u.h)(),c=Object(ve.a)({type:"ingredients",item:t}),a=Object(M.a)(c,2)[1];return Object(p.jsxs)("div",{className:Je.a.item,onClick:function(){n.push("/ingredients/".concat(t._id),{background:r})},ref:a,children:[Object(p.jsx)("img",{className:"".concat(Je.a.image," ml-4 mr-4 mb-1"),src:t.image,alt:t.name}),Object(p.jsxs)("div",{className:"".concat(Je.a.price," mb-1"),children:[Object(p.jsx)("span",{className:"mr-2 text_type_digits-default",children:t.price}),Object(p.jsx)(S.CurrencyIcon,{type:"primary"})]}),Object(p.jsx)("div",{className:Je.a.name,children:t.name}),t.count&&t.count>0&&Object(p.jsx)(S.Counter,{count:t.count,size:"default"})]})},Ze=n(114),Ye=n.n(Ze),Qe=function(e){var t=e.title,n=e.id,r=e.items;return Object(p.jsxs)("section",{id:n,children:[Object(p.jsx)("h2",{className:"text_type_main-medium mb-6",children:t}),Object(p.jsx)("div",{className:"".concat(Ye.a.ingredients," pl-4 pr-4 pb-10"),children:r.map((function(e){return Object(p.jsx)(Xe,{item:e},e._id)}))})]})},Ke=n(115),$e=n.n(Ke),et=function(e){var t=e.tabs,n=e.onScroll,c=d((function(e){return e.burgerConstructor.ingredients})),a=d((function(e){return e.burgerConstructor.constructorIngredients})),s=a.bun,i=a.ingredients,o=Object(r.useMemo)((function(){var e=Object(C.a)(i);return s&&(e.push(s),e.push(s)),c.map((function(t){return Object(O.a)(Object(O.a)({},t),{},{count:e.filter((function(e){return e._id===t._id})).length})}))}),[c,s,i]);return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:$e.a.ingredients,onScroll:n,children:t.map((function(e){return Object(p.jsx)(Qe,{title:e.title,id:e.id,items:o.filter((function(t){return t.type===e.id}))},e.id)}))})})},tt=n(116),nt=n.n(tt),rt=function(e){var t=e.data,n=e.activeTab,r=e.onClick;return Object(p.jsx)("nav",{className:"".concat(nt.a.tabs," mb-10"),children:t.map((function(e){return Object(p.jsx)(S.Tab,{value:e.id,active:n===e.id,onClick:r,children:e.title},e.id)}))})},ct=function(){var e=Object(r.useState)("bun"),t=Object(M.a)(e,2),n=t[0],c=t[1],a=[{id:"bun",title:"\u0411\u0443\u043b\u043a\u0438"},{id:"sauce",title:"\u0421\u043e\u0443\u0441\u044b"},{id:"main",title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}];return Object(p.jsxs)("div",{className:"".concat(Ve.a.wrapper," pt-10 mr-10"),children:[Object(p.jsx)("h1",{className:"text_type_main-large mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(p.jsx)(rt,{data:a,activeTab:n,onClick:function(e){c(e);var t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth"})}}),Object(p.jsx)(et,{tabs:a,onScroll:function(e){var t=e.currentTarget.getBoundingClientRect().top,r=Array.from(e.currentTarget.querySelectorAll("section")).map((function(e){return{id:e.id,top:Math.abs(e.getBoundingClientRect().top-t)}}));r.length&&(r.sort((function(e,t){return e.top<t.top?-1:1})),n!==r[0].id&&c(r[0].id))}})]})},at=function(){return Object(p.jsx)("main",{className:P.a.main,children:Object(p.jsxs)(je.a,{backend:be.a,children:[Object(p.jsx)(ct,{}),Object(p.jsx)(qe,{})]})})},st=n(117),it=n.n(st),ot=function(e){var t=e.text,n=e.value;return Object(p.jsxs)("div",{className:it.a.value,children:[Object(p.jsx)("div",{className:"mb-2",children:t}),Object(p.jsx)("div",{className:"text text_type_digits-default",children:n})]})},ut=n(86),dt=n.n(ut),lt=function(){var e=Object(u.i)().id,t=Object(u.g)(),n=d((function(e){return e.burgerConstructor})),c=n.ingredients,a=n.ingredientsRequest,s=n.ingredientsFailed,i=c.filter((function(t){return t._id===e}));if(Object(r.useEffect)((function(){s&&setTimeout((function(){t.replace("/")}),3e3)}),[s,t]),a||!c.length&&!s)return null;var o=i[0];return Object(p.jsx)("div",{className:dt.a.ingredientDetails,children:s?Object(p.jsx)("h1",{className:"text text_type_main-large",children:"\u041c\u044b \u043d\u0435 \u0441\u043c\u043e\u0433\u043b\u0438 \u043d\u0430\u0439\u0442\u0438 \u0432\u0430\u0448 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442 :("}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("img",{className:"mb-4",src:o.image_large,alt:"ingredient",width:"480",height:"240"}),Object(p.jsx)("div",{className:"mb-8 text text_type_main-medium",children:o.name}),Object(p.jsxs)("div",{className:"".concat(dt.a.nutritions," text text_type_main-default"),children:[Object(p.jsx)(ot,{text:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b",value:o.calories}),Object(p.jsx)(ot,{text:"\u0411\u0435\u043b\u043a\u0438, \u0433",value:o.proteins}),Object(p.jsx)(ot,{text:"\u0416\u0438\u0440\u044b, \u0433",value:o.fat}),Object(p.jsx)(ot,{text:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433",value:o.carbohydrates})]})]})})},jt=function(){return Object(p.jsxs)("div",{className:"".concat(P.a.ingredientDetails," mt-30"),children:[Object(p.jsx)("h1",{className:"text text_type_main-large",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(p.jsx)(lt,{})]})},bt=function(){var e=l(),t=Object(u.g)().location.state,n=Object(r.useState)({email:"",password:""}),c=Object(M.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)(!1),j=Object(M.a)(i,2),b=j[0],m=j[1],f=d((function(e){return e.auth})),h=f.user,x=f.signInSuccess;Object(r.useEffect)((function(){e(de())}),[e]);var _=function(e){s(Object(O.a)(Object(O.a)({},a),{},Object(G.a)({},e.target.name,e.target.value)))};return h?Object(p.jsx)(u.a,{to:(null===t||void 0===t?void 0:t.from)||"/"}):Object(p.jsxs)("div",{className:P.a.wrapper,children:[Object(p.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(function(e){return function(t){ne(e).then((function(e){e.accessToken&&0===e.accessToken.indexOf("Bearer")&&(localStorage.setItem("refreshToken",e.refreshToken),V("accessToken",e.accessToken.split("Bearer ")[1])),t({type:se,user:e.user}),t({type:oe,success:!0})})).catch((function(e){"email or password are incorrect"===e.message&&t({type:oe,success:!1})}))}}(a))},className:"".concat(P.a.form," mb-20"),children:[Object(p.jsx)("h1",{className:P.a.heading,children:"\u0412\u0445\u043e\u0434"}),Object(p.jsx)(S.Input,{type:"email",placeholder:"E-mail",value:a.email,name:"email",size:"default",onChange:_}),Object(p.jsx)(S.Input,{type:b?"text":"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:a.password,name:"password",icon:b?"HideIcon":"ShowIcon",size:"default",onChange:_,onIconClick:function(){m(!b)},error:!x,errorText:x?"":"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c \u0438\u043b\u0438 e-mail"}),Object(p.jsx)(S.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(p.jsxs)("div",{className:P.a.actions,children:[Object(p.jsxs)("p",{children:["\u0412\u044b\xa0\u2014 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c? ",Object(p.jsx)(o.b,{className:P.a.link,to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(p.jsxs)("p",{children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(p.jsx)(o.b,{className:P.a.link,to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})]})},pt=n(29),mt=n.n(pt),Ot=function(){var e=Object(u.i)().id,t=Object(u.h)().pathname,n=d((function(e){var t;return(null===(t=e.allOrders.ordersData)||void 0===t?void 0:t.orders)||[]})),r=d((function(e){var t;return(null===(t=e.userOrders.userOrdersData)||void 0===t?void 0:t.orders)||[]})),c=t.includes("/profile/orders")?r:n,a=d((function(e){return e.burgerConstructor.ingredients})),s=y(c.filter((function(t){return t._id===e})),a);if(!s.length)return null;var i=s[0],o=i.ingredients.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{count:i.ingredients.filter((function(t){return e._id===t._id})).length*("bun"===e.type?2:1)})})).filter((function(e,t){return i.ingredients.findIndex((function(t){return t._id===e._id}))===t}));return Object(p.jsxs)("div",{className:"".concat(mt.a.wrapper," text text_type_main-default"),children:[Object(p.jsxs)("div",{className:"mb-15",children:[Object(p.jsx)("h1",{className:"text text_type_main-medium mb-2",children:i.name}),Object(p.jsx)(k,{status:i.status})]}),Object(p.jsxs)("div",{className:"mb-10",children:[Object(p.jsx)("h2",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(p.jsx)("div",{className:"".concat(mt.a.ingredients," pr-8"),children:o.map((function(e,t){return Object(p.jsxs)("div",{className:mt.a.ingredient,children:[Object(p.jsx)("img",{className:mt.a.image,src:e.image,alt:"ingredient"}),Object(p.jsx)("div",{className:mt.a.name,children:e.name}),Object(p.jsxs)("div",{className:mt.a.price,children:[Object(p.jsx)("div",{className:"text text_type_digits-default",children:"".concat(e.count," x ").concat(e.price)}),Object(p.jsx)(S.CurrencyIcon,{type:"primary"})]})]},t)}))})]}),Object(p.jsxs)("div",{className:mt.a.footer,children:[Object(p.jsx)("div",{className:mt.a.date,children:v(i.createdAt)}),Object(p.jsxs)("div",{className:mt.a.totalPrice,children:[Object(p.jsx)("div",{className:"text text_type_digits-default",children:N(i.ingredients)}),Object(p.jsx)(S.CurrencyIcon,{type:"primary"})]})]})]})},ft=n(87),ht=n.n(ft),xt=function(){var e=Object(u.i)().id,t=Object(u.h)().pathname,n=d((function(e){var t;return(null===(t=e.allOrders.ordersData)||void 0===t?void 0:t.orders)||[]})),r=d((function(e){var t;return(null===(t=e.userOrders.userOrdersData)||void 0===t?void 0:t.orders)||[]})),c=t.includes("/profile/orders")?r:n,a=d((function(e){return e.burgerConstructor.ingredients})),s=y(c.filter((function(t){return t._id===e})),a);return console.log("orderInfoPage",s),s.length?Object(p.jsxs)("div",{className:"".concat(ht.a.container," pt-30"),children:[Object(p.jsxs)("div",{className:"".concat(ht.a.header," text text_type_digits-default"),children:["#",s[0].number]}),Object(p.jsx)(Ot,{})]}):null},_t=n(118),gt=n.n(_t),vt=function(){var e=d((function(e){var t;return(null===(t=e.userOrders.userOrdersData)||void 0===t?void 0:t.orders)||[]}));return Object(p.jsx)("section",{className:gt.a.orders,children:Object(p.jsx)(B,{orders:e,showStatus:!0})})},Nt=n(119),yt=n(40),Ct=n.n(yt),St=function(){var e=Object(u.h)().pathname,t=l(),n=[{id:"profile",path:"/profile",text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",caption:"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"},{id:"orders",path:"/profile/orders",text:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432",caption:"\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}],c=Object(r.useMemo)((function(){var t=e.split("/");return t[t.length-1]}),[e]);return Object(p.jsxs)("nav",{className:Ct.a.nav,children:[Object(p.jsxs)("ul",{className:"text text_type_main-medium mb-20",children:[n.map((function(e){return Object(p.jsx)("li",{className:"".concat(c===e.id?Ct.a.active:""," ").concat(Ct.a.link),children:Object(p.jsx)(o.b,{to:e.path,children:e.text})},e.id)})),Object(p.jsx)("li",{className:Ct.a.link,onClick:function(){t(ue())},children:"\u0412\u044b\u0445\u043e\u0434"})]}),Object(p.jsxs)("div",{className:Ct.a.caption,children:["\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435",Object(p.jsx)("br",{}),n.filter((function(e){return e.id===c})).map((function(e){return e.caption}))]})]})},wt=n(52),Et=n.n(wt),It=function(){var e=l(),t=d((function(e){return e.auth.user})),n=Object(r.useState)({name:{value:"",placeholder:"\u0418\u043c\u044f",disabled:!0},email:{value:"",placeholder:"\u041b\u043e\u0433\u0438\u043d",disabled:!0},password:{value:"",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",disabled:!0}}),c=Object(M.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)(a),o=Object(M.a)(i,2),j=o[0],b=o[1],m=Object.keys(a);Object(r.useEffect)((function(){e(de())}),[e]),Object(r.useEffect)((function(){if(t){for(var e=Object(O.a)({},a),n=0,r=Object.keys(t);n<r.length;n++){var c=r[n];e[c]&&(e[c].value=t[c],e[c].disabled=!0)}s(e),b(e)}}),[t]);var f=function(e){var t=e.target.name;s(Object(O.a)(Object(O.a)({},a),{},Object(G.a)({},t,Object(O.a)(Object(O.a)({},a[t]),{},{value:e.target.value}))))};return Object(p.jsxs)("div",{className:"".concat(Et.a.wrapper," mt-30"),children:[Object(p.jsx)(St,{}),Object(p.jsxs)(u.d,{children:[Object(p.jsx)(u.b,{path:"/profile",exact:!0,children:Object(p.jsxs)("form",{className:Et.a.form,children:[m.map((function(e){return Object(p.jsx)(S.Input,{type:"password"===e?"password":"text",placeholder:a[e].placeholder,value:a[e].value,name:e,disabled:a[e].disabled,icon:a[e].disabled?"EditIcon":"CloseIcon",onChange:f,onIconClick:function(){return function(e){a[e].disabled?(s(Object(O.a)(Object(O.a)({},a),{},Object(G.a)({},e,Object(O.a)(Object(O.a)({},a[e]),{},{disabled:!1})))),setTimeout((function(){document.querySelector("[name=".concat(e,"]")).focus()}),0)):(s(Object(O.a)(Object(O.a)({},a),{},Object(G.a)({},e,Object(O.a)(Object(O.a)({},a[e]),{},{value:j[e].value,disabled:!0})))),setTimeout((function(){document.querySelector("[name=".concat(e,"]")).blur()}),0))}(e)}},e)})),m.filter((function(e){return!a[e].disabled})).length?Object(p.jsxs)("div",{className:Et.a.actions,children:[Object(p.jsx)("div",{className:"".concat(Et.a.cancel," mr-7"),onClick:function(){s(j)},children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(p.jsx)(S.Button,{onClick:function(){var t,n,r={},c=Object(Nt.a)(m);try{for(c.s();!(t=c.n()).done;){var i=t.value;s(Object(O.a)(Object(O.a)({},a),{},Object(G.a)({},i,Object(O.a)(Object(O.a)({},a[i]),{},{disabled:!0})))),a[i].value!==j[i].value&&(r[i]=a[i].value)}}catch(o){c.e(o)}finally{c.f()}Object.keys(r).length&&e((n=r,function(e){ae(n).then((function(t){e({type:se,user:t.user})}))}))},children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}):null]})}),Object(p.jsx)(u.b,{path:"/profile/orders",exact:!0,children:Object(p.jsx)(vt,{})})]})]})},Tt=function(){var e=l(),t=Object(r.useState)({name:"",email:"",password:""}),n=Object(M.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(!1),i=Object(M.a)(s,2),j=i[0],b=i[1],m=d((function(e){return e.auth.user}));Object(r.useEffect)((function(){e(de())}),[e]);var f=function(e){a(Object(O.a)(Object(O.a)({},c),{},Object(G.a)({},e.target.name,e.target.value)))};return m?Object(p.jsx)(u.a,{to:"/"}):Object(p.jsxs)("div",{className:P.a.wrapper,children:[Object(p.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(function(e){return function(t){te(e).then((function(e){e.accessToken&&0===e.accessToken.indexOf("Bearer")&&(localStorage.setItem("refreshToken",e.refreshToken),V("accessToken",e.accessToken.split("Bearer ")[1])),t({type:se,user:e.user})}))}}(c))},className:"".concat(P.a.form," mb-20"),children:[Object(p.jsx)("h1",{className:P.a.heading,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(p.jsx)(S.Input,{type:"text",placeholder:"\u0418\u043c\u044f",value:c.name,name:"name",size:"default",onChange:f}),Object(p.jsx)(S.Input,{type:"email",placeholder:"E-mail",value:c.email,name:"email",size:"default",onChange:f}),Object(p.jsx)(S.Input,{type:j?"text":"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:c.password,name:"password",icon:j?"HideIcon":"ShowIcon",size:"default",onChange:f,onIconClick:function(){b(!j)}}),Object(p.jsx)(S.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(p.jsx)("div",{className:P.a.actions,children:Object(p.jsxs)("p",{children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? ",Object(p.jsx)(o.b,{className:P.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})},kt=function(){var e=Object(u.g)(),t=e.location.state,n=Object(r.useState)({password:"",token:""}),c=Object(M.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)(!1),d=Object(M.a)(i,2),l=d[0],j=d[1],b=function(e){s(Object(O.a)(Object(O.a)({},a),{},Object(G.a)({},e.target.name,e.target.value)))},m=Object(r.useCallback)((function(t){t.preventDefault(),ee(a).then((function(e){console.log(e)})),e.replace("/login")}),[a]);return"/forgot-password"!==(null===t||void 0===t?void 0:t.from)?Object(p.jsx)(u.a,{to:"/"}):Object(p.jsxs)("div",{className:P.a.wrapper,children:[Object(p.jsxs)("form",{onSubmit:m,className:"".concat(P.a.form," mb-20"),children:[Object(p.jsx)("h1",{className:P.a.heading,children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(p.jsx)(S.Input,{type:l?"text":"password",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",value:a.password,name:"password",icon:l?"HideIcon":"ShowIcon",size:"default",onChange:b,onIconClick:function(){j(!l)}}),Object(p.jsx)(S.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",value:a.token,name:"token",size:"default",onChange:b}),Object(p.jsx)(S.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),Object(p.jsx)("div",{className:P.a.actions,children:Object(p.jsxs)("p",{children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c? ",Object(p.jsx)(o.b,{className:P.a.link,to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})})]})},Rt="WS_CONNECTION_START",Dt="WS_CONNECTION_SUCCESS",Lt="WS_CONNECTION_ERROR",Bt="WS_CONNECTION_CLOSED",Ut="WS_GET_MESSAGE",Pt="WS_USER_ORDERS_CONNECTION_START",At="WS_USER_ORDERS_CONNECTION_SUCCESS",Gt="WS_USER_ORDERS_CONNECTION_ERROR",Mt="WS_USER_ORDERS_CONNECTION_CLOSED",zt="WS_USER_ORDERS_GET_MESSAGE",Ft=n(88),qt=n.n(Ft),Ht=n(89),Vt=n.n(Ht),Wt=function(e){var t=e.icon,n=e.text,r=e.isActive,c=void 0!==r&&r,a=e.path,s=void 0===a?"/":a,i=e.onLinkClick;return Object(p.jsxs)("div",{className:"\n                ".concat(c?Vt.a.active:""," \n                ").concat(Vt.a.element," \n                pl-5 pr-5 text_color_inactive"),onClick:function(){i(s)},children:[t," ",n]})},Jt=n(120),Xt=n.n(Jt),Zt=function(){var e=Object(u.g)(),t=Object(u.h)(),n=Object(r.useState)("/"),c=Object(M.a)(n,2),a=c[0],s=c[1];Object(r.useEffect)((function(){s(t.pathname)}),[t]);var i=[{name:"constructor",text:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",icon:S.BurgerIcon,path:"/"},{name:"ribbon",text:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",icon:S.ListIcon,path:"/feed"}],o=function(t){e.replace(t)};return Object(p.jsx)("ul",{className:Xt.a.navList,children:i.map((function(e,t){var n=e.icon,r=a===e.path;return Object(p.jsx)("li",{className:t===i.length-1?"":"mr-2",children:Object(p.jsx)(Wt,{icon:Object(p.jsx)(n,{type:r?"primary":"secondary"}),text:e.text,isActive:r,path:e.path,onLinkClick:o})},e.name)}))})},Yt=function(){var e=Object(u.g)(),t=Object(u.h)();return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(Wt,{isActive:t.pathname.includes("/profile"),icon:Object(p.jsx)(S.ProfileIcon,{type:"secondary"}),text:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",onLinkClick:function(){e.replace("/profile")}})})},Qt=function(){return Object(p.jsx)("header",{className:"".concat(qt.a.appHeader," pt-4 pb-4"),children:Object(p.jsxs)("nav",{className:qt.a.content,children:[Object(p.jsx)(Zt,{}),Object(p.jsx)(o.b,{to:"/",children:Object(p.jsx)(S.Logo,{})}),Object(p.jsx)(Yt,{})]})})},Kt=n(59),$t=["children"],en=function(e){var t=e.children,n=Object(Kt.a)(e,$t),r=d((function(e){return e.auth.user})),c=H("accessToken");return!r&&c?null:Object(p.jsx)(u.b,Object(O.a)(Object(O.a)({},n),{},{render:function(e){var n=e.location;return r?t:Object(p.jsx)(u.a,{to:{pathname:"/login",state:{from:n}}})}}))},tn=n(121),nn=n.n(tn),rn=function(){var e=l(),t=Object(u.g)(),n=Object(u.h)(),c="POP"===t.action?null:n.state&&n.state.background,a=n.state&&n.state.orderNumber?n.state.orderNumber:0;Object(r.useEffect)((function(){e((function(e){e({type:me}),Q().then((function(t){e({type:Oe,items:t.data})})).catch((function(t){e({type:fe})}))})),e({type:Rt}),e(de())}),[e]);var s=d((function(e){return e.auth.user})),i=d((function(e){return e.userOrders.wsConnected}));Object(r.useEffect)((function(){s&&!i&&e({type:Pt})}),[s,e]);var o=Object(p.jsx)(Be,{onClose:function(){return t.push(c?c.pathname:"/",{})},header:"#".concat(a),headerClassName:"text text_type_digits-default",children:Object(p.jsx)(Ot,{})});return Object(p.jsxs)("div",{className:"".concat(nn.a.app," text text_type_main-default"),children:[Object(p.jsx)(Qt,{}),Object(p.jsxs)(u.d,{location:c||n,children:[Object(p.jsx)(u.b,{path:"/login",children:Object(p.jsx)(bt,{})}),Object(p.jsx)(u.b,{path:"/register",children:Object(p.jsx)(Tt,{})}),Object(p.jsx)(u.b,{path:"/forgot-password",children:Object(p.jsx)(le,{})}),Object(p.jsx)(u.b,{path:"/reset-password",children:Object(p.jsx)(kt,{})}),Object(p.jsx)(en,{path:"/profile/orders/:id",children:Object(p.jsx)(xt,{})}),Object(p.jsx)(en,{path:"/profile",children:Object(p.jsx)(It,{})}),Object(p.jsx)(u.b,{path:"/",exact:!0,children:Object(p.jsx)(at,{})}),Object(p.jsx)(u.b,{path:"/feed",exact:!0,children:Object(p.jsx)(A,{})}),Object(p.jsx)(u.b,{path:"/ingredients/:id",children:Object(p.jsx)(jt,{})}),Object(p.jsx)(u.b,{path:"/feed/:id",children:Object(p.jsx)(xt,{})})]}),c&&"PUSH"===t.action&&Object(p.jsxs)(u.d,{children:[Object(p.jsx)(u.b,{path:"/ingredients/:id",children:Object(p.jsx)(Be,{header:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",onClose:function(){return t.push(c.pathname,{})},children:Object(p.jsx)(lt,{})})}),Object(p.jsx)(en,{path:"/profile/orders/:id",children:o}),Object(p.jsx)(u.b,{path:"/feed/:id",children:o})]})]})},cn=(n(208),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,224)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))}),an=n(32),sn=n(122),on=["success"],un=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r){var c;return function(a){return function(s){var i=r.dispatch,o=r.getState,u=s.type,d=t.wsInit,l=t.onOpen,j=t.onError,b=t.onMessage,p=t.onClose,m=o().auth.user;if(u===d){var O="";if(n&&m){var f=H("accessToken");O="?token=".concat(f)}console.log("".concat(e).concat(O)),c=new WebSocket("".concat(e).concat(O))}c&&(c.onopen=function(e){i({type:l,payload:e})},c.onerror=function(e){i({type:j,payload:e})},c.onmessage=function(e){var t=e.data,n=JSON.parse(t),r=(n.success,Object(Kt.a)(n,on));i({type:b,payload:r})},c.onclose=function(e){i({type:p,payload:e})}),a(s)}}}},dn={wsConnected:!1,ordersData:null},ln={user:null,signInSuccess:!0},jn=n(222),bn={ingredients:[],ingredientsRequest:!1,ingredientsFailed:!1,constructorIngredients:{bun:null,ingredients:[]}},pn={order:null,orderRequestSuccess:!1,orderRequest:!1},mn={wsConnected:!1,userOrdersData:null},On=Object(an.b)({burgerConstructor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case me:return Object(O.a)(Object(O.a)({},e),{},{ingredientsRequest:!0});case Oe:return Object(O.a)(Object(O.a)({},e),{},{ingredientsFailed:!1,ingredients:t.items,ingredientsRequest:!1});case fe:return Object(O.a)(Object(O.a)({},e),{},{ingredientsFailed:!0,ingredientsRequest:!1});case he:if("bun"===t.item.type)return Object(O.a)(Object(O.a)({},e),{},{constructorIngredients:Object(O.a)(Object(O.a)({},e.constructorIngredients),{},{bun:t.item})});var n=Object(C.a)(e.constructorIngredients.ingredients);return n.push(Object(O.a)(Object(O.a)({},t.item),{},{uid:Object(jn.a)()})),Object(O.a)(Object(O.a)({},e),{},{constructorIngredients:Object(O.a)(Object(O.a)({},e.constructorIngredients),{},{ingredients:n})});case xe:var r=Object(C.a)(e.constructorIngredients.ingredients);return r.splice(t.index,1),Object(O.a)(Object(O.a)({},e),{},{constructorIngredients:Object(O.a)(Object(O.a)({},e.constructorIngredients),{},{ingredients:r})});case _e:return Object(O.a)(Object(O.a)({},e),{},{constructorIngredients:Object(O.a)({},bn.constructorIngredients)});case ge:var c=e.constructorIngredients.ingredients.filter((function(e){return e.uid===t.item.uid}))[0],a=e.constructorIngredients.ingredients.indexOf(c),s=Object(C.a)(e.constructorIngredients.ingredients);return s.splice(a,1),s.splice(t.index,0,c),Object(O.a)(Object(O.a)({},e),{},{constructorIngredients:Object(O.a)(Object(O.a)({},e.constructorIngredients),{},{ingredients:s})});default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ee:return Object(O.a)(Object(O.a)({},e),{},{orderRequestSuccess:!1,orderRequest:!0});case Ie:return Object(O.a)(Object(O.a)({},e),{},{order:t.order,orderRequestSuccess:!0,orderRequest:!1});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return Object(O.a)(Object(O.a)({},e),{},{user:t.user});case ie:return Object(O.a)(Object(O.a)({},e),{},{user:null});case oe:return Object(O.a)(Object(O.a)({},e),{},{signInSuccess:t.success});default:return e}},allOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Dt:return Object(O.a)(Object(O.a)({},e),{},{wsConnected:!0});case Lt:case Bt:return Object(O.a)(Object(O.a)({},e),{},{wsConnected:!1});case Ut:return Object(O.a)(Object(O.a)({},e),{},{ordersData:t.payload});default:return e}},userOrders:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case At:return Object(O.a)(Object(O.a)({},e),{},{wsConnected:!0});case Gt:case Mt:return Object(O.a)(Object(O.a)({},e),{},{wsConnected:!1});case zt:return Object(O.a)(Object(O.a)({},e),{},{userOrdersData:t.payload});default:return e}}}),fn={wsInit:Rt,onOpen:Dt,onError:Lt,onMessage:Ut,onClose:Bt},hn={wsInit:Pt,onOpen:At,onError:Gt,onMessage:zt,onClose:Mt},xn=("object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):an.c)(Object(an.a)(sn.a,un("wss://norma.nomoreparties.space/orders/all",fn),un("wss://norma.nomoreparties.space/orders",hn,!0)));var _n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(an.d)(On,e,xn)}();s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(i.a,{store:_n,children:Object(p.jsx)(o.a,{basename:"/react-burger",children:Object(p.jsx)(rn,{})})})}),document.getElementById("root")),cn()},27:function(e,t,n){e.exports={card:"order-card_card__O8mT8",header:"order-card_header__GbaAk",timestamp:"order-card_timestamp__1VtqL",content:"order-card_content__2XVEU",images:"order-card_images__24m8Q",addIngredient:"order-card_addIngredient__26UYa",image:"order-card_image__3iZUh",ingredientsCount:"order-card_ingredientsCount__IcNLt",price:"order-card_price__20sM5"}},29:function(e,t,n){e.exports={wrapper:"order-info_wrapper__M8UYs",status:"order-info_status__wcc9g",ingredients:"order-info_ingredients__2nbzc",image:"order-info_image__14CQh",ingredient:"order-info_ingredient__30pRC",price:"order-info_price__sNxEd",name:"order-info_name__AKC9Z",date:"order-info_date__3YH4v",footer:"order-info_footer__2VeuG",totalPrice:"order-info_totalPrice__1wp-Z"}},30:function(e,t,n){e.exports={ordersStats:"orders-stats_ordersStats__3ITHt",ordersBoard:"orders-stats_ordersBoard__37il2",done:"orders-stats_done__11fr7",ready:"orders-stats_ready__2-nBi",ordersList:"orders-stats_ordersList__1Tfex",completedNumber:"orders-stats_completedNumber__-BGDz"}},40:function(e,t,n){e.exports={nav:"profile-nav_nav__2gyI3",active:"profile-nav_active__1TBx4",link:"profile-nav_link__w_RXu",caption:"profile-nav_caption__2IkGy"}},50:function(e,t,n){e.exports={done:"order-status_done__1myxO",created:"order-status_created__VZNOg",pending:"order-status_pending__30G5t",canceled:"order-status_canceled__2R-ZZ"}},51:function(e,t,n){e.exports={item:"ingredient-item_item__38ZA0",price:"ingredient-item_price__1Fj29",name:"ingredient-item_name__Ay04H",image:"ingredient-item_image__kiYeV"}},52:function(e,t,n){e.exports={wrapper:"profile_wrapper__RM8WX",form:"profile_form__1yxrZ",actions:"profile_actions__3_HFg",cancel:"profile_cancel__JDjvO"}},63:function(e,t,n){e.exports={orderDetails:"order-details_orderDetails__2Vxf6",orderNumber:"order-details_orderNumber__DSh5k",textColor:"order-details_textColor__vwfg1"}},64:function(e,t,n){e.exports={info:"info_info__302fd",price:"info_price__9ZEtI",disabledButton:"info_disabledButton__2tKy4"}},8:function(e,t,n){e.exports={main:"home_main__3hh9x",container:"home_container__21QWL",wrapper:"home_wrapper__3g3VD",form:"home_form__FsYR-",heading:"home_heading__3mYtc",actions:"home_actions__c5PEE",link:"home_link__cEK_O",ingredientDetails:"home_ingredientDetails__3i3wV",orders:"home_orders__3GabL"}},84:function(e,t,n){e.exports={modal:"modal_modal__1DF1f",header:"modal_header__2iX3r"}},86:function(e,t,n){e.exports={ingredientDetails:"ingredient-details_ingredientDetails__3v9ma",nutritions:"ingredient-details_nutritions__23hSu"}},87:function(e,t,n){e.exports={container:"order-info_container__17j_4",header:"order-info_header__3ER2u"}},88:function(e,t,n){e.exports={appHeader:"app-header_appHeader__nIqlo",content:"app-header_content__KCd-V"}},89:function(e,t,n){e.exports={element:"nav-element_element__3MFca",active:"nav-element_active__2SO4Q"}}},[[209,1,2]]]);
//# sourceMappingURL=main.a1b7d259.chunk.js.map